<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1e1b4b">
    <meta name="description" content="Workout Tracking App">
    <title>Workout Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.5.0/Recharts.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .lucide {
            width: 1.25rem;
            height: 1.25rem;
            display: inline-block;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel" data-type="module">
        const { useState, useEffect } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } = Recharts;
        
        // Icons
        const Plus = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
            </svg>
        );
        
        const Trash2 = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6" />
            </svg>
        );
        
        const Dumbbell = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6.5 6.5l11 11M3 12h3m15 0h3M6 3v3m0 12v3m12-18v3m0 12v3" />
            </svg>
        );
        
        const TrendingUp = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M23 6l-9.5 9.5-5-5L1 18M17 6h6v6" />
            </svg>
        );
        
        const Calendar = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
        );
        
        const X = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
        );
        
        const Download = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" />
            </svg>
        );
        
        const Upload = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" />
            </svg>
        );

        const Edit = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
        );

        // Exercise definitions
        const EXERCISES = {
            push: {
                chest: ['Bench Press', 'Incline Bench Press', 'My Chest Exercise', 'Dumbell Bench', 'Dips', 'Pec Deck', 'Deficit Push Ups', 'Incline Push Ups'],
                triceps: ['Overhead Extensions', 'Push Downs', 'Push Ups', 'Skull Crusher', 'Triceps Kickbacks'],
                shoulder: ['Shoulder Press', 'Lateral Raise']
            },
            pull: {
                back: ['Pull Ups', 'Pull Down', 'Rows', 'TBar Rows', 'Death Rows', 'Lower Back Extension', 'Chest Supported Rows', 'Shrugs', 'Reverse Cable Flys', 'Reverse Pec', 'Face Pulls', 'Pull Over'],
                biceps: ['EZ Bar Curl', 'Curl', 'Preacher Curl Machine', 'Hammer Curl', 'Reverse Curl', '21s']
            },
            legs: {
                quads: ['Squad', 'Leg Press', 'Leg Extensions'],
                hamstrings: ['Romainian Dead Lift', 'Leg Curl', 'Hip Press'],
                inner: ['Leg Closes'],
                calves: ['Calf Raises']
            },
            abs: {
                abs: ['Full Leg Raises', 'Leg Raises', 'Half Dragon Flys', 'Decline Crunches', 'Crunches', 'L-Sit']
            }
        };

        function WorkoutTracker() {
            const [workouts, setWorkouts] = useState([]);
            const [view, setView] = useState('select');
            const [workoutType, setWorkoutType] = useState(null);
            const [currentWorkout, setCurrentWorkout] = useState(null);
            const [filterType, setFilterType] = useState('all');
            const [editingWorkout, setEditingWorkout] = useState(null);
            const [statsCategory, setStatsCategory] = useState(null);
            const [selectedExercise, setSelectedExercise] = useState(null);

            useEffect(() => {
                loadWorkouts();
            }, []);

            const loadWorkouts = () => {
                try {
                    const stored = localStorage.getItem('workouts');
                    if (stored) {
                        setWorkouts(JSON.parse(stored));
                    }
                } catch (error) {
                    console.log('No workouts found yet');
                }
            };

            const saveWorkouts = (updatedWorkouts) => {
                try {
                    localStorage.setItem('workouts', JSON.stringify(updatedWorkouts));
                    setWorkouts(updatedWorkouts);
                } catch (error) {
                    console.error('Error saving workouts:', error);
                }
            };

            const startNewWorkout = (type) => {
                setWorkoutType(type);
                if (type === 'running') {
                    setCurrentWorkout({
                        type: 'running',
                        date: new Date().toISOString().split('T')[0],
                        runs: []
                    });
                } else if (type === 'kickboxing') {
                    setCurrentWorkout({
                        type: 'kickboxing',
                        date: new Date().toISOString().split('T')[0],
                        duration: { hours: '', minutes: '', seconds: '' }
                    });
                } else {
                    setCurrentWorkout({
                        type: type,
                        date: new Date().toISOString().split('T')[0],
                        exercises: []
                    });
                }
                setView('workout');
            };

            const addExercise = (exerciseName) => {
                setCurrentWorkout({
                    ...currentWorkout,
                    exercises: [
                        ...currentWorkout.exercises,
                        { name: exerciseName, sets: [{ reps: '', weight: '', form: 'Standard' }] }
                    ]
                });
            };

            const addCustomExercise = () => {
                const name = prompt('√úbungsname eingeben:');
                if (name && name.trim()) {
                    addExercise(name.trim());
                }
            };

            const addRun = () => {
                setCurrentWorkout({
                    ...currentWorkout,
                    runs: [
                        ...currentWorkout.runs,
                        { distance: '', time: { hours: '', minutes: '', seconds: '' }, sprints: '' }
                    ]
                });
            };

            const updateRun = (runIndex, field, value) => {
                const updated = { ...currentWorkout };
                if (field === 'time') {
                    updated.runs[runIndex].time = value;
                } else {
                    updated.runs[runIndex][field] = value;
                }
                setCurrentWorkout(updated);
            };

            const removeRun = (runIndex) => {
                const updated = { ...currentWorkout };
                updated.runs.splice(runIndex, 1);
                setCurrentWorkout(updated);
            };

            const updateExercise = (exerciseIndex, field, value) => {
                const updated = { ...currentWorkout };
                updated.exercises[exerciseIndex][field] = value;
                setCurrentWorkout(updated);
            };

            const addSet = (exerciseIndex) => {
                const updated = { ...currentWorkout };
                updated.exercises[exerciseIndex].sets.push({ reps: '', weight: '', form: 'Standard' });
                setCurrentWorkout(updated);
            };

            const updateSet = (exerciseIndex, setIndex, field, value) => {
                const updated = { ...currentWorkout };
                updated.exercises[exerciseIndex].sets[setIndex][field] = value;
                setCurrentWorkout(updated);
            };

            const removeSet = (exerciseIndex, setIndex) => {
                const updated = { ...currentWorkout };
                updated.exercises[exerciseIndex].sets.splice(setIndex, 1);
                setCurrentWorkout(updated);
            };

            const removeExercise = (exerciseIndex) => {
                const updated = { ...currentWorkout };
                updated.exercises.splice(exerciseIndex, 1);
                setCurrentWorkout(updated);
            };

            const saveWorkout = () => {
                if (currentWorkout.type === 'running' && currentWorkout.runs.length === 0) return;
                if (currentWorkout.type === 'kickboxing' && !currentWorkout.duration.minutes && !currentWorkout.duration.hours && !currentWorkout.duration.seconds) return;
                if (['push', 'pull', 'legs', 'abs'].includes(currentWorkout.type) && currentWorkout.exercises.length === 0) return;
                
                const newWorkout = {
                    ...currentWorkout,
                    id: Date.now(),
                    timestamp: new Date().toISOString()
                };
                
                const updated = [newWorkout, ...workouts];
                saveWorkouts(updated);
                
                setCurrentWorkout(null);
                setWorkoutType(null);
                setView('select');
            };

            const deleteWorkout = (id) => {
                if (confirm('Workout wirklich l√∂schen?')) {
                    const updated = workouts.filter(w => w.id !== id);
                    saveWorkouts(updated);
                }
            };

            const startEditWorkout = (workout) => {
                setEditingWorkout(workout);
                setCurrentWorkout(JSON.parse(JSON.stringify(workout)));
                setWorkoutType(workout.type);
                setView('workout');
            };

            const updateExistingWorkout = () => {
                const updated = workouts.map(w => w.id === editingWorkout.id ? { ...currentWorkout, id: editingWorkout.id, timestamp: editingWorkout.timestamp } : w);
                saveWorkouts(updated);
                setEditingWorkout(null);
                setCurrentWorkout(null);
                setWorkoutType(null);
                setView('history');
            };

            const cancelEdit = () => {
                setEditingWorkout(null);
                setCurrentWorkout(null);
                setWorkoutType(null);
                setView('history');
            };

            const exportBackup = () => {
                const backup = {
                    version: '2.0',
                    exportDate: new Date().toISOString(),
                    workouts: workouts
                };
                
                const dataStr = JSON.stringify(backup, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `workout-backup-${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
            };

            const importBackup = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const backup = JSON.parse(e.target.result);
                        
                        if (!backup.workouts || !Array.isArray(backup.workouts)) {
                            alert('Ung√ºltiges Backup-Format!');
                            return;
                        }

                        const confirmed = confirm(
                            `Backup vom ${new Date(backup.exportDate).toLocaleDateString('de-DE')}\n` +
                            `${backup.workouts.length} Workouts gefunden.\n\n` +
                            `M√∂chtest du deine aktuellen Daten ersetzen oder hinzuf√ºgen?\n\n` +
                            `OK = Ersetzen | Abbrechen = Hinzuf√ºgen`
                        );

                        let updatedWorkouts;
                        if (confirmed) {
                            updatedWorkouts = backup.workouts;
                        } else {
                            const existingIds = new Set(workouts.map(w => w.id));
                            const newWorkouts = backup.workouts.filter(w => !existingIds.has(w.id));
                            updatedWorkouts = [...workouts, ...newWorkouts];
                        }

                        saveWorkouts(updatedWorkouts);
                        alert(`Erfolgreich ${updatedWorkouts.length} Workouts importiert!`);
                        
                    } catch (error) {
                        console.error('Import error:', error);
                        alert('Fehler beim Importieren der Backup-Datei!');
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            };

            const getExerciseProgress = (exerciseName) => {
                const data = workouts
                    .filter(w => ['push', 'pull', 'legs', 'abs'].includes(w.type))
                    .flatMap(w => w.exercises.filter(e => e.name === exerciseName).map(e => ({
                        date: w.date,
                        value: e.sets.reduce((sum, set) => sum + (parseFloat(set.reps) || 0) * (parseFloat(set.weight) || 0), 0)
                    })))
                    .sort((a, b) => new Date(a.date) - new Date(b.date));
                
                return data;
            };

            const getAllExerciseNames = () => {
                const names = new Set();
                workouts.forEach(w => {
                    if (w.exercises) {
                        w.exercises.forEach(e => names.add(e.name));
                    }
                });
                return Array.from(names);
            };

            const filteredWorkouts = filterType === 'all' ? workouts : workouts.filter(w => w.type === filterType);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
                    <div className="max-w-4xl mx-auto p-4 sm:p-6 pb-20">
                        <div className="text-center mb-8 pt-8">
                            <div className="flex items-center justify-center gap-3 mb-2">
                                <Dumbbell />
                                <h1 className="text-4xl font-bold text-white">Workout Tracker</h1>
                            </div>
                            <p className="text-purple-200">Verfolge deine Fortschritte</p>
                        </div>

                        {/* Main Navigation */}
                        <div className="flex gap-2 mb-6 bg-slate-800/50 backdrop-blur p-2 rounded-xl">
                            <button
                                onClick={() => { setView('select'); setCurrentWorkout(null); setWorkoutType(null); setEditingWorkout(null); }}
                                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${
                                    view === 'select' || view === 'workout' ? 'bg-purple-600 text-white shadow-lg' : 'text-purple-200 hover:bg-slate-700/50'
                                }`}
                            >
                                <Plus /> Workout
                            </button>
                            <button
                                onClick={() => { setView('history'); setStatsCategory(null); setSelectedExercise(null); }}
                                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${
                                    view === 'history' ? 'bg-purple-600 text-white shadow-lg' : 'text-purple-200 hover:bg-slate-700/50'
                                }`}
                            >
                                <Calendar /> Historie
                            </button>
                            <button
                                onClick={() => { setView('stats'); setStatsCategory(null); setSelectedExercise(null); }}
                                className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all ${
                                    view === 'stats' ? 'bg-purple-600 text-white shadow-lg' : 'text-purple-200 hover:bg-slate-700/50'
                                }`}
                            >
                                <TrendingUp /> Stats
                            </button>
                        </div>

                        {/* Backup Buttons */}
                        <div className="flex gap-2 mb-6">
                            <button
                                onClick={exportBackup}
                                className="flex-1 py-3 px-4 bg-green-600/20 hover:bg-green-600/30 text-green-300 rounded-lg transition-colors font-medium border border-green-600/30"
                            >
                                <Download /> Backup
                            </button>
                            <label className="flex-1">
                                <input type="file" accept=".json" onChange={importBackup} className="hidden" />
                                <div className="py-3 px-4 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 rounded-lg transition-colors font-medium border border-blue-600/30 text-center cursor-pointer">
                                    <Upload /> Wiederherstellen
                                </div>
                            </label>
                        </div>

                        {/* Workout Type Selection */}
                        {view === 'select' && !currentWorkout && (
                            <div className="grid grid-cols-2 gap-4">
                                <button onClick={() => startNewWorkout('push')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">üí™ Push</h3>
                                    <p className="text-purple-200 text-sm">Brust, Trizeps, Schultern</p>
                                </button>
                                <button onClick={() => startNewWorkout('pull')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">üî• Pull</h3>
                                    <p className="text-purple-200 text-sm">R√ºcken, Bizeps</p>
                                </button>
                                <button onClick={() => startNewWorkout('legs')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">ü¶µ Legs</h3>
                                    <p className="text-purple-200 text-sm">Beine komplett</p>
                                </button>
                                <button onClick={() => startNewWorkout('abs')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">üî≤ Abs</h3>
                                    <p className="text-purple-200 text-sm">Bauchmuskulatur</p>
                                </button>
                                <button onClick={() => startNewWorkout('running')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">üèÉ Rennen</h3>
                                    <p className="text-purple-200 text-sm">Laufen & Sprints</p>
                                </button>
                                <button onClick={() => startNewWorkout('kickboxing')} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 hover:bg-slate-700/50 transition-colors">
                                    <h3 className="text-2xl font-bold text-white mb-2">ü•ä Kickboxen</h3>
                                    <p className="text-purple-200 text-sm">Kampfsport Training</p>
                                </button>
                            </div>
                        )}

                        {/* Workout Entry */}
                        {view === 'workout' && currentWorkout && (
                            <div className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 shadow-2xl">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-white capitalize">{editingWorkout ? 'Bearbeiten' : 'Neues'} {currentWorkout.type} Workout</h2>
                                    {editingWorkout && (
                                        <button onClick={cancelEdit} className="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg">
                                            Abbrechen
                                        </button>
                                    )}
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block text-purple-200 mb-2 font-medium">Datum</label>
                                    <input
                                        type="date"
                                        value={currentWorkout.date}
                                        onChange={(e) => setCurrentWorkout({ ...currentWorkout, date: e.target.value })}
                                        className="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    />
                                </div>

                                {/* Strength Workouts */}
                                {['push', 'pull', 'legs', 'abs'].includes(currentWorkout.type) && (
                                    <>
                                        {/* Exercise Selection Buttons */}
                                        {currentWorkout.exercises.length === 0 && (
                                            <div className="mb-6">
                                                <h3 className="text-xl font-bold text-white mb-4">√úbung w√§hlen:</h3>
                                                {Object.entries(EXERCISES[currentWorkout.type]).map(([category, exercises]) => (
                                                    <div key={category} className="mb-4">
                                                        <h4 className="text-purple-300 font-semibold mb-2 capitalize">{category}</h4>
                                                        <div className="grid grid-cols-2 gap-2">
                                                            {exercises.map(ex => (
                                                                <button
                                                                    key={ex}
                                                                    onClick={() => addExercise(ex)}
                                                                    className="px-4 py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-200 rounded-lg transition-colors text-sm"
                                                                >
                                                                    {ex}
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </div>
                                                ))}
                                                <button
                                                    onClick={addCustomExercise}
                                                    className="w-full py-3 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 rounded-lg transition-colors font-medium mt-4"
                                                >
                                                    + Eigene √úbung hinzuf√ºgen
                                                </button>
                                            </div>
                                        )}

                                        {/* Current Exercises */}
                                        {currentWorkout.exercises.map((exercise, exerciseIndex) => (
                                            <div key={exerciseIndex} className="mb-6 bg-slate-700/30 rounded-xl p-4 border border-slate-600">
                                                <div className="flex justify-between items-center mb-4">
                                                    <h4 className="text-xl font-bold text-white">{exercise.name}</h4>
                                                    <button
                                                        onClick={() => removeExercise(exerciseIndex)}
                                                        className="px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>

                                                <div className="space-y-2">
                                                    {exercise.sets.map((set, setIndex) => (
                                                        <div key={setIndex} className="flex gap-2 items-center">
                                                            <span className="text-purple-300 font-medium w-16 text-sm">Satz {setIndex + 1}</span>
                                                            <input
                                                                type="number"
                                                                placeholder="Wdh"
                                                                value={set.reps}
                                                                onChange={(e) => updateSet(exerciseIndex, setIndex, 'reps', e.target.value)}
                                                                className="w-20 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                                                            />
                                                            <input
                                                                type="number"
                                                                step="0.5"
                                                                placeholder="kg"
                                                                value={set.weight}
                                                                onChange={(e) => updateSet(exerciseIndex, setIndex, 'weight', e.target.value)}
                                                                className="w-24 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                                                            />
                                                            <select
                                                                value={set.form}
                                                                onChange={(e) => updateSet(exerciseIndex, setIndex, 'form', e.target.value)}
                                                                className="flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                                                            >
                                                                <option value="Standard">Standard</option>
                                                                <option value="Gut">Gut</option>
                                                                <option value="Sehr gut">Sehr gut</option>
                                                            </select>
                                                            {exercise.sets.length > 1 && (
                                                                <button
                                                                    onClick={() => removeSet(exerciseIndex, setIndex)}
                                                                    className="px-2 py-2 text-red-400 hover:bg-red-600/20 rounded-lg transition-colors"
                                                                >
                                                                    <X />
                                                                </button>
                                                            )}
                                                        </div>
                                                    ))}
                                                </div>

                                                <button
                                                    onClick={() => addSet(exerciseIndex)}
                                                    className="mt-3 w-full py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 rounded-lg transition-colors font-medium"
                                                >
                                                    + Satz hinzuf√ºgen
                                                </button>
                                            </div>
                                        ))}

                                        {/* Add More Exercises Button */}
                                        {currentWorkout.exercises.length > 0 && (
                                            <div className="mb-4">
                                                <h4 className="text-purple-200 font-semibold mb-2">Weitere √úbung hinzuf√ºgen:</h4>
                                                {Object.entries(EXERCISES[currentWorkout.type]).map(([category, exercises]) => (
                                                    <div key={category} className="mb-3">
                                                        <h5 className="text-purple-300 text-sm mb-2 capitalize">{category}</h5>
                                                        <div className="grid grid-cols-2 gap-2">
                                                            {exercises.map(ex => (
                                                                <button
                                                                    key={ex}
                                                                    onClick={() => addExercise(ex)}
                                                                    className="px-3 py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-200 rounded-lg transition-colors text-xs"
                                                                >
                                                                    {ex}
                                                                </button>
                                                            ))}
                                                        </div>
                                                    </div>
                                                ))}
                                                <button
                                                    onClick={addCustomExercise}
                                                    className="w-full py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 rounded-lg transition-colors font-medium text-sm mt-2"
                                                >
                                                    + Eigene √úbung
                                                </button>
                                            </div>
                                        )}

                                        <button
                                            onClick={editingWorkout ? updateExistingWorkout : saveWorkout}
                                            className="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium shadow-lg"
                                        >
                                            {editingWorkout ? '√Ñnderungen speichern' : 'Workout speichern'}
                                        </button>
                                    </>
                                )}

                                {/* Running Workout */}
                                {currentWorkout.type === 'running' && (
                                    <>
                                        {currentWorkout.runs.map((run, runIndex) => (
                                            <div key={runIndex} className="mb-6 bg-slate-700/30 rounded-xl p-4 border border-slate-600">
                                                <div className="flex justify-between items-center mb-4">
                                                    <h4 className="text-lg font-bold text-white">Lauf {runIndex + 1}</h4>
                                                    <button
                                                        onClick={() => removeRun(runIndex)}
                                                        className="px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>

                                                <div className="space-y-3">
                                                    <div>
                                                        <label className="block text-purple-200 mb-2 text-sm">Strecke (km)</label>
                                                        <input
                                                            type="number"
                                                            step="0.1"
                                                            placeholder="z.B. 5.0"
                                                            value={run.distance}
                                                            onChange={(e) => updateRun(runIndex, 'distance', e.target.value)}
                                                            className="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                        />
                                                    </div>

                                                    <div>
                                                        <label className="block text-purple-200 mb-2 text-sm">Zeit</label>
                                                        <div className="flex gap-2">
                                                            <input
                                                                type="number"
                                                                placeholder="Std"
                                                                value={run.time.hours}
                                                                onChange={(e) => updateRun(runIndex, 'time', { ...run.time, hours: e.target.value })}
                                                                className="flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                            />
                                                            <input
                                                                type="number"
                                                                placeholder="Min"
                                                                value={run.time.minutes}
                                                                onChange={(e) => updateRun(runIndex, 'time', { ...run.time, minutes: e.target.value })}
                                                                className="flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                            />
                                                            <input
                                                                type="number"
                                                                placeholder="Sek"
                                                                value={run.time.seconds}
                                                                onChange={(e) => updateRun(runIndex, 'time', { ...run.time, seconds: e.target.value })}
                                                                className="flex-1 px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                            />
                                                        </div>
                                                    </div>

                                                    <div>
                                                        <label className="block text-purple-200 mb-2 text-sm">Anzahl Sprints (optional)</label>
                                                        <input
                                                            type="number"
                                                            placeholder="z.B. 3"
                                                            value={run.sprints}
                                                            onChange={(e) => updateRun(runIndex, 'sprints', e.target.value)}
                                                            className="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        ))}

                                        <button
                                            onClick={addRun}
                                            className="w-full py-3 mb-4 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 rounded-lg transition-colors font-medium"
                                        >
                                            + Weiteren Lauf hinzuf√ºgen
                                        </button>

                                        <button
                                            onClick={editingWorkout ? updateExistingWorkout : saveWorkout}
                                            disabled={currentWorkout.runs.length === 0}
                                            className="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                        >
                                            {editingWorkout ? '√Ñnderungen speichern' : 'Workout speichern'}
                                        </button>
                                    </>
                                )}

                                {/* Kickboxing Workout */}
                                {currentWorkout.type === 'kickboxing' && (
                                    <>
                                        <div className="mb-6">
                                            <label className="block text-purple-200 mb-2 font-medium">Trainingsdauer</label>
                                            <div className="flex gap-2">
                                                <div className="flex-1">
                                                    <input
                                                        type="number"
                                                        placeholder="Std"
                                                        value={currentWorkout.duration.hours}
                                                        onChange={(e) => setCurrentWorkout({ ...currentWorkout, duration: { ...currentWorkout.duration, hours: e.target.value } })}
                                                        className="w-full px-3 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                    />
                                                    <p className="text-slate-400 text-xs mt-1">Stunden</p>
                                                </div>
                                                <div className="flex-1">
                                                    <input
                                                        type="number"
                                                        placeholder="Min"
                                                        value={currentWorkout.duration.minutes}
                                                        onChange={(e) => setCurrentWorkout({ ...currentWorkout, duration: { ...currentWorkout.duration, minutes: e.target.value } })}
                                                        className="w-full px-3 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                    />
                                                    <p className="text-slate-400 text-xs mt-1">Minuten</p>
                                                </div>
                                                <div className="flex-1">
                                                    <input
                                                        type="number"
                                                        placeholder="Sek"
                                                        value={currentWorkout.duration.seconds}
                                                        onChange={(e) => setCurrentWorkout({ ...currentWorkout, duration: { ...currentWorkout.duration, seconds: e.target.value } })}
                                                        className="w-full px-3 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                    />
                                                    <p className="text-slate-400 text-xs mt-1">Sekunden</p>
                                                </div>
                                            </div>
                                        </div>

                                        <button
                                            onClick={editingWorkout ? updateExistingWorkout : saveWorkout}
                                            className="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors font-medium shadow-lg"
                                        >
                                            {editingWorkout ? '√Ñnderungen speichern' : 'Workout speichern'}
                                        </button>
                                    </>
                                )}
                            </div>
                        )}

                        {/* History View */}
                        {view === 'history' && (
                            <>
                                <div className="mb-4">
                                    <select
                                        value={filterType}
                                        onChange={(e) => setFilterType(e.target.value)}
                                        className="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    >
                                        <option value="all">Alle Workouts</option>
                                        <option value="push">Push</option>
                                        <option value="pull">Pull</option>
                                        <option value="legs">Legs</option>
                                        <option value="abs">Abs</option>
                                        <option value="running">Rennen</option>
                                        <option value="kickboxing">Kickboxen</option>
                                    </select>
                                </div>

                                <div className="space-y-4">
                                    {filteredWorkouts.length === 0 ? (
                                        <div className="text-center py-12 bg-slate-800/50 backdrop-blur rounded-2xl">
                                            <Calendar />
                                            <p className="text-slate-400 text-lg mt-4">Noch keine Workouts vorhanden</p>
                                        </div>
                                    ) : (
                                        filteredWorkouts.map((workout) => (
                                            <div key={workout.id} className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 shadow-xl">
                                                <div className="flex justify-between items-start mb-4">
                                                    <div>
                                                        <h3 className="text-xl font-bold text-white capitalize">
                                                            {workout.type === 'running' ? 'üèÉ Rennen' : 
                                                             workout.type === 'kickboxing' ? 'ü•ä Kickboxen' :
                                                             workout.type === 'push' ? 'üí™ Push' :
                                                             workout.type === 'pull' ? 'üî• Pull' :
                                                             workout.type === 'legs' ? 'ü¶µ Legs' :
                                                             'üî≤ Abs'}
                                                        </h3>
                                                        <p className="text-purple-300 text-sm">{new Date(workout.date).toLocaleDateString('de-DE')}</p>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => startEditWorkout(workout)}
                                                            className="px-3 py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 rounded-lg transition-colors"
                                                        >
                                                            <Edit />
                                                        </button>
                                                        <button
                                                            onClick={() => deleteWorkout(workout.id)}
                                                            className="px-3 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg transition-colors"
                                                        >
                                                            <Trash2 />
                                                        </button>
                                                    </div>
                                                </div>

                                                {/* Strength Workout Display */}
                                                {workout.exercises && workout.exercises.map((exercise, idx) => (
                                                    <div key={idx} className="mb-3 last:mb-0 bg-slate-700/30 rounded-lg p-4">
                                                        <h4 className="font-semibold text-purple-200 mb-2">{exercise.name}</h4>
                                                        <div className="space-y-1">
                                                            {exercise.sets.map((set, setIdx) => (
                                                                <div key={setIdx} className="text-slate-300 text-sm">
                                                                    Satz {setIdx + 1}: {set.reps} Wdh √ó {set.weight} kg 
                                                                    <span className="text-purple-300 ml-2">({set.form})</span>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                ))}

                                                {/* Running Display */}
                                                {workout.runs && workout.runs.map((run, idx) => (
                                                    <div key={idx} className="mb-3 last:mb-0 bg-slate-700/30 rounded-lg p-4">
                                                        <h4 className="font-semibold text-purple-200 mb-2">Lauf {idx + 1}</h4>
                                                        <div className="text-slate-300 text-sm space-y-1">
                                                            <p>Strecke: {run.distance} km</p>
                                                            <p>Zeit: {run.time.hours || '0'}:{String(run.time.minutes || '0').padStart(2, '0')}:{String(run.time.seconds || '0').padStart(2, '0')}</p>
                                                            {run.sprints && <p>Sprints: {run.sprints}x 100m</p>}
                                                        </div>
                                                    </div>
                                                ))}

                                                {/* Kickboxing Display */}
                                                {workout.duration && (
                                                    <div className="bg-slate-700/30 rounded-lg p-4">
                                                        <h4 className="font-semibold text-purple-200 mb-2">Trainingsdauer</h4>
                                                        <p className="text-slate-300 text-sm">
                                                            {workout.duration.hours || '0'}:{String(workout.duration.minutes || '0').padStart(2, '0')}:{String(workout.duration.seconds || '0').padStart(2, '0')}
                                                        </p>
                                                    </div>
                                                )}
                                            </div>
                                        ))
                                    )}
                                </div>
                            </>
                        )}

                        {/* Stats View */}
                        {view === 'stats' && (
                            <div className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 shadow-2xl">
                                <h2 className="text-2xl font-bold text-white mb-6">Statistiken</h2>
                                
                                {!statsCategory && !selectedExercise && (
                                    <div className="grid grid-cols-2 gap-4">
                                        <button onClick={() => setStatsCategory('push')} className="bg-slate-700/30 rounded-xl p-4 hover:bg-slate-700/50 transition-colors border border-slate-600">
                                            <h3 className="text-lg font-bold text-white">üí™ Push</h3>
                                        </button>
                                        <button onClick={() => setStatsCategory('pull')} className="bg-slate-700/30 rounded-xl p-4 hover:bg-slate-700/50 transition-colors border border-slate-600">
                                            <h3 className="text-lg font-bold text-white">üî• Pull</h3>
                                        </button>
                                        <button onClick={() => setStatsCategory('legs')} className="bg-slate-700/30 rounded-xl p-4 hover:bg-slate-700/50 transition-colors border border-slate-600">
                                            <h3 className="text-lg font-bold text-white">ü¶µ Legs</h3>
                                        </button>
                                        <button onClick={() => setStatsCategory('abs')} className="bg-slate-700/30 rounded-xl p-4 hover:bg-slate-700/50 transition-colors border border-slate-600">
                                            <h3 className="text-lg font-bold text-white">üî≤ Abs</h3>
                                        </button>
                                    </div>
                                )}

                                {statsCategory && !selectedExercise && (
                                    <>
                                        <button onClick={() => setStatsCategory(null)} className="mb-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg">
                                            ‚Üê Zur√ºck
                                        </button>
                                        <h3 className="text-xl font-bold text-white mb-4 capitalize">{statsCategory} √úbungen</h3>
                                        <div className="grid grid-cols-1 gap-2">
                                            {getAllExerciseNames()
                                                .filter(name => {
                                                    const exercisesInCategory = Object.values(EXERCISES[statsCategory] || {}).flat();
                                                    return workouts.some(w => w.type === statsCategory && w.exercises?.some(e => e.name === name)) ||
                                                           exercisesInCategory.includes(name);
                                                })
                                                .map(name => (
                                                    <button
                                                        key={name}
                                                        onClick={() => setSelectedExercise(name)}
                                                        className="px-4 py-3 bg-purple-600/20 hover:bg-purple-600/30 text-purple-200 rounded-lg transition-colors text-left"
                                                    >
                                                        {name}
                                                    </button>
                                                ))}
                                        </div>
                                    </>
                                )}

                                {selectedExercise && (
                                    <>
                                        <button onClick={() => setSelectedExercise(null)} className="mb-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg">
                                            ‚Üê Zur√ºck
                                        </button>
                                        <h3 className="text-xl font-bold text-white mb-6">{selectedExercise}</h3>
                                        {getExerciseProgress(selectedExercise).length > 0 ? (
                                            <ResponsiveContainer width="100%" height={300}>
                                                <LineChart data={getExerciseProgress(selectedExercise)}>
                                                    <CartesianGrid strokeDasharray="3 3" stroke="#475569" />
                                                    <XAxis dataKey="date" stroke="#cbd5e1" />
                                                    <YAxis stroke="#cbd5e1" />
                                                    <Tooltip contentStyle={{ backgroundColor: '#1e293b', border: '1px solid #475569' }} />
                                                    <Line type="monotone" dataKey="value" stroke="#a855f7" strokeWidth={2} dot={{ fill: '#a855f7' }} />
                                                </LineChart>
                                            </ResponsiveContainer>
                                        ) : (
                                            <p className="text-slate-400 text-center py-8">Noch keine Daten f√ºr diese √úbung</p>
                                        )}
                                    </>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<WorkoutTracker />, document.getElementById('root'));
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
